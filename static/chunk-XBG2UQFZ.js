import{b as A,d as W,f as B,l as j}from"./chunk-CDNCWXHS.js";import{a as D,e as I,f as O}from"./chunk-6GHKOAKW.js";import{$ as t,B as d,Ha as k,K as l,La as U,P as _,Qa as T,Z as p,_ as e,aa as c,ca as S,d as s,ja as r,ka as M,la as N,na as g,oa as f,pa as h,q as E,ra as v,u,x as b,y as P}from"./chunk-QCJJ4XD2.js";var w=class w{constructor(){this.http=u(U);this.baseUrl=`${D.apiUrl}/users`}getProfile(){return s(this,null,function*(){return this.http.get(`${this.baseUrl}/me`).toPromise()})}updateProfile(o){return s(this,null,function*(){return this.http.put(`${this.baseUrl}/me`,o).toPromise()})}changePassword(o,a){return s(this,null,function*(){return this.http.put(`${this.baseUrl}/me/password`,{currentPassword:o,newPassword:a}).toPromise()})}getStats(){return s(this,null,function*(){return this.http.get(`${this.baseUrl}/me/stats`).toPromise()})}exportData(){return s(this,null,function*(){return this.http.post(`${this.baseUrl}/me/export`,{}).toPromise()})}deleteAccount(){return s(this,null,function*(){return this.http.delete(`${this.baseUrl}/me`).toPromise()})}};w.\u0275fac=function(a){return new(a||w)},w.\u0275prov=E({token:w,factory:w.\u0275fac,providedIn:"root"});var C=w;var y=()=>({updateOn:"change"}),x=class x{constructor(){this.auth=u(I);this.router=u(T);this.toast=u(O);this.userService=u(C);this.firstName=d("");this.lastName=d("");this.bio=d("");this.currentPassword=d("");this.newPassword=d("");this.confirmPassword=d("");this.totalConversations=d(0);this.totalMessages=d(0);this.memberSince=d("");this.profile=d(null)}getUserEmail(){return this.auth.currentUser()||"guest@example.com"}getUserInitial(){return this.getUserEmail().charAt(0).toUpperCase()}updateProfile(){return s(this,null,function*(){try{let o={firstName:this.firstName(),lastName:this.lastName(),bio:this.bio()},a=yield this.userService.updateProfile(o);this.profile.set(a),this.toast.show("Profile updated successfully","success")}catch{this.toast.show("Failed to update profile","error")}})}updatePassword(){return s(this,null,function*(){if(this.newPassword()!==this.confirmPassword()){this.toast.show("Passwords do not match","error");return}if(this.newPassword().length<6){this.toast.show("Password must be at least 6 characters","error");return}try{yield this.userService.changePassword(this.currentPassword(),this.newPassword()),this.toast.show("Password updated successfully","success"),this.currentPassword.set(""),this.newPassword.set(""),this.confirmPassword.set("")}catch{this.toast.show("Failed to update password","error")}})}deleteAccount(){return s(this,null,function*(){if(confirm("Are you absolutely sure you want to delete your account? This action cannot be undone and will permanently delete all your data."))try{yield this.userService.deleteAccount(),this.toast.show("Account deleted successfully","success"),this.router.navigateByUrl("/login")}catch{this.toast.show("Failed to delete account","error")}})}changeAvatar(){this.toast.show("Avatar upload coming soon","info")}goBackToChat(){this.router.navigateByUrl("/chat")}loadProfileData(){return s(this,null,function*(){try{let[o,a]=yield Promise.all([this.userService.getProfile(),this.userService.getStats()]);this.profile.set(o),this.firstName.set(o.firstName||""),this.lastName.set(o.lastName||""),this.bio.set(o.bio||""),this.totalConversations.set(a.totalConversations),this.totalMessages.set(a.totalMessages),this.memberSince.set(a.memberSince)}catch(o){console.error("Failed to load profile data:",o),this.firstName.set("John"),this.lastName.set("Doe"),this.bio.set("AI enthusiast and developer"),this.totalConversations.set(127),this.totalMessages.set(2847),this.memberSince.set("7 days ago")}})}ngOnInit(){this.loadProfileData()}};x.\u0275fac=function(a){return new(a||x)},x.\u0275cmp=_({type:x,selectors:[["app-profile"]],decls:124,vars:23,consts:[[1,"max-w-4xl","mx-auto","px-4","py-8"],[1,"mb-8"],[1,"flex","items-center","gap-4","mb-4"],[1,"flex","items-center","gap-2","px-4","py-2","rounded-lg","bg-ink-700/50","border","border-white/10","text-neutral-300","hover:text-neutral-100","hover:bg-ink-600/50","transition-all",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"text-3xl","font-bold","text-gradient","mb-2"],[1,"text-neutral-400"],[1,"space-y-8"],[1,"card-premium","p-6"],[1,"flex","items-center","gap-3","mb-6"],[1,"w-10","h-10","rounded-xl","bg-gradient-to-r","from-accent-500/20","to-purple-500/20","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-accent-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-xl","font-semibold","text-neutral-100"],[1,"text-sm","text-neutral-400"],[1,"flex","items-start","gap-6"],[1,"flex-shrink-0"],[1,"relative"],[1,"w-24","h-24","rounded-full","bg-gradient-to-r","from-accent-500","to-purple-500","flex","items-center","justify-center","text-white","text-2xl","font-bold"],[1,"flex-1","space-y-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"block","text-sm","font-medium","text-neutral-300","mb-2"],["type","text","placeholder","Enter your first name",1,"input","w-full",3,"ngModelChange","ngModel","ngModelOptions"],["type","text","placeholder","Enter your last name",1,"input","w-full",3,"ngModelChange","ngModel","ngModelOptions"],["type","email","readonly","",1,"input","w-full",3,"value"],["placeholder","Tell us about yourself",1,"input","w-full","h-20","resize-none",3,"ngModelChange","ngModel","ngModelOptions"],[1,"flex","justify-end"],[1,"btn","btn-primary","px-6","py-2",3,"click"],[1,"w-10","h-10","rounded-xl","bg-gradient-to-r","from-emerald-500/20","to-gold-500/20","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-emerald-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"],[1,"space-y-6"],[1,"space-y-4"],[1,"text-sm","font-medium","text-neutral-200"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["type","password","placeholder","Enter current password",1,"input","w-full",3,"ngModelChange","ngModel","ngModelOptions"],["type","password","placeholder","Enter new password",1,"input","w-full",3,"ngModelChange","ngModel","ngModelOptions"],["type","password","placeholder","Confirm new password",1,"input","w-full",3,"ngModelChange","ngModel","ngModelOptions"],[1,"w-10","h-10","rounded-xl","bg-gradient-to-r","from-purple-500/20","to-emerald-500/20","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-purple-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"text-center","p-4","rounded-lg","bg-gradient-to-r","from-accent-500/10","to-purple-500/10","border","border-accent-500/20"],[1,"text-2xl","font-bold","text-gradient","mb-1"],[1,"text-center","p-4","rounded-lg","bg-gradient-to-r","from-purple-500/10","to-emerald-500/10","border","border-purple-500/20"],[1,"text-center","p-4","rounded-lg","bg-gradient-to-r","from-emerald-500/10","to-gold-500/10","border","border-emerald-500/20"],[1,"card-premium","p-6","border","border-red-500/20"],[1,"w-10","h-10","rounded-xl","bg-gradient-to-r","from-red-500/20","to-orange-500/20","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"flex","items-center","justify-between","p-4","rounded-lg","bg-red-500/10","border","border-red-500/20"],[1,"text-sm","font-medium","text-red-300"],[1,"text-xs","text-red-400"],[1,"px-4","py-2","rounded-lg","bg-red-500/20","border","border-red-500/30","text-red-400","font-medium","hover:bg-red-500/30","transition-all",3,"click"]],template:function(a,i){a&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),S("click",function(){return i.goBackToChat()}),b(),e(4,"svg",4),c(5,"path",5),t(),P(),e(6,"span"),r(7,"Back to Chat"),t()()(),e(8,"h1",6),r(9,"Profile"),t(),e(10,"p",7),r(11,"Manage your account information and preferences"),t()(),e(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11),b(),e(16,"svg",12),c(17,"path",13),t()(),P(),e(18,"div")(19,"h2",14),r(20,"Profile Information"),t(),e(21,"p",15),r(22,"Update your personal details and avatar"),t()()(),e(23,"div",16)(24,"div",17)(25,"div",18)(26,"div",19),r(27),t()()(),e(28,"div",20)(29,"div",21)(30,"div")(31,"label",22),r(32,"First Name"),t(),e(33,"input",23),h("ngModelChange",function(n){return f(i.firstName,n)||(i.firstName=n),n}),t()(),e(34,"div")(35,"label",22),r(36,"Last Name"),t(),e(37,"input",24),h("ngModelChange",function(n){return f(i.lastName,n)||(i.lastName=n),n}),t()()(),e(38,"div")(39,"label",22),r(40,"Email Address"),t(),c(41,"input",25),t(),e(42,"div")(43,"label",22),r(44,"Bio"),t(),e(45,"textarea",26),h("ngModelChange",function(n){return f(i.bio,n)||(i.bio=n),n}),t()(),e(46,"div",27)(47,"button",28),S("click",function(){return i.updateProfile()}),r(48," Update Profile "),t()()()()(),e(49,"div",9)(50,"div",10)(51,"div",29),b(),e(52,"svg",30),c(53,"path",31),t()(),P(),e(54,"div")(55,"h2",14),r(56,"Account Security"),t(),e(57,"p",15),r(58,"Manage your password and security settings"),t()()(),e(59,"div",32)(60,"div",33)(61,"h3",34),r(62,"Change Password"),t(),e(63,"div",35)(64,"div")(65,"label",22),r(66,"Current Password"),t(),e(67,"input",36),h("ngModelChange",function(n){return f(i.currentPassword,n)||(i.currentPassword=n),n}),t()(),e(68,"div")(69,"label",22),r(70,"New Password"),t(),e(71,"input",37),h("ngModelChange",function(n){return f(i.newPassword,n)||(i.newPassword=n),n}),t()(),e(72,"div")(73,"label",22),r(74,"Confirm Password"),t(),e(75,"input",38),h("ngModelChange",function(n){return f(i.confirmPassword,n)||(i.confirmPassword=n),n}),t()()(),e(76,"div",27)(77,"button",28),S("click",function(){return i.updatePassword()}),r(78," Update Password "),t()()()()(),e(79,"div",9)(80,"div",10)(81,"div",39),b(),e(82,"svg",40),c(83,"path",41),t()(),P(),e(84,"div")(85,"h2",14),r(86,"Account Statistics"),t(),e(87,"p",15),r(88,"Your usage and activity overview"),t()()(),e(89,"div",42)(90,"div",43)(91,"div",44),r(92),t(),e(93,"div",15),r(94,"Total Conversations"),t()(),e(95,"div",45)(96,"div",44),r(97),t(),e(98,"div",15),r(99,"Messages Sent"),t()(),e(100,"div",46)(101,"div",44),r(102),t(),e(103,"div",15),r(104,"Member Since"),t()()()(),e(105,"div",47)(106,"div",10)(107,"div",48),b(),e(108,"svg",49),c(109,"path",50),t()(),P(),e(110,"div")(111,"h2",14),r(112,"Danger Zone"),t(),e(113,"p",15),r(114,"Irreversible and destructive actions"),t()()(),e(115,"div",33)(116,"div",51)(117,"div")(118,"h3",52),r(119,"Delete Account"),t(),e(120,"p",53),r(121,"Permanently delete your account and all data"),t()(),e(122,"button",54),S("click",function(){return i.deleteAccount()}),r(123," Delete Account "),t()()()()()()),a&2&&(l(27),N(" ",i.getUserInitial()," "),l(6),g("ngModel",i.firstName),p("ngModelOptions",v(17,y)),l(4),g("ngModel",i.lastName),p("ngModelOptions",v(18,y)),l(4),p("value",i.getUserEmail()),l(4),g("ngModel",i.bio),p("ngModelOptions",v(19,y)),l(22),g("ngModel",i.currentPassword),p("ngModelOptions",v(20,y)),l(4),g("ngModel",i.newPassword),p("ngModelOptions",v(21,y)),l(4),g("ngModel",i.confirmPassword),p("ngModelOptions",v(22,y)),l(17),M(i.totalConversations()),l(5),M(i.totalMessages()),l(5),M(i.memberSince()))},dependencies:[k,j,A,W,B],encapsulation:2});var F=x;export{F as ProfileComponent};
