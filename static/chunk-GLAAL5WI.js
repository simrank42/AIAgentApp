import{a as V,b as p,c as T,d as Q,f as R,g as G,h as N,i as j,j as B,k as z,m as D,n as H,o as $}from"./chunk-PA5TEUCC.js";import{$ as d,C as f,Ia as P,Ja as M,K as s,P as k,U as u,Ua as F,Xa as L,aa as t,ab as q,ba as r,ca as l,cb as A,d as S,fa as C,ga as h,ha as g,ma as w,na as a,oa as I,pa as v,u as x,v as _,w as E,x as m,y as c}from"./chunk-SDRE7JNM.js";function Z(n,i){if(n&1&&(t(0,"div",57),m(),t(1,"svg",58),l(2,"path",59),r(),a(3),r()),n&2){let o=g();s(3),v(" ",o.getFieldError("email")," ")}}function J(n,i){n&1&&(m(),t(0,"svg",60),l(1,"path",61)(2,"path",62),r())}function K(n,i){n&1&&(m(),t(0,"svg",60),l(1,"path",63),r())}function W(n,i){if(n&1&&(t(0,"div",57),m(),t(1,"svg",58),l(2,"path",59),r(),a(3),r()),n&2){let o=g();s(3),v(" ",o.getFieldError("password")," ")}}function X(n,i){n&1&&(m(),t(0,"svg",60),l(1,"path",61)(2,"path",62),r())}function Y(n,i){n&1&&(m(),t(0,"svg",60),l(1,"path",63),r())}function ee(n,i){if(n&1&&(t(0,"div",57),m(),t(1,"svg",58),l(2,"path",59),r(),a(3),r()),n&2){let o=g();s(3),v(" ",o.getFieldError("confirmPassword")," ")}}function te(n,i){if(n&1&&(t(0,"option",64),a(1),r()),n&2){let o=i.$implicit;d("value",o.id),s(),v(" ",o.question," ")}}function re(n,i){n&1&&l(0,"div",65)}function ie(n,i){n&1&&(m(),t(0,"svg",60),l(1,"path",66),r())}function ne(n,i){if(n&1){let o=C();t(0,"div",67)(1,"span"),a(2),r(),t(3,"button",68),h("click",function(){_(o);let y=g();return E(y.retrySecurityQuestions())}),a(4," Retry "),r()()}if(n&2){let o=g();s(2),I(o.questionsError())}}function oe(n,i){n&1&&(t(0,"div",69),a(1," No security questions available. Please try again later. "),r())}function se(n,i){if(n&1&&(t(0,"div",57),m(),t(1,"svg",58),l(2,"path",59),r(),a(3),r()),n&2){let o=g();s(3),v(" ",o.getFieldError("securityQuestionId")," ")}}function ae(n,i){if(n&1&&(t(0,"div",57),m(),t(1,"svg",58),l(2,"path",59),r(),a(3),r()),n&2){let o=g();s(3),v(" ",o.getFieldError("securityAnswer")," ")}}function le(n,i){n&1&&l(0,"div",70)}function de(n,i){n&1&&(m(),t(0,"svg",71),l(1,"path",9),r())}var b=class b{constructor(){this.auth=x(A);this.router=x(F);this.toast=x(q);this.fb=x(D);this.isLoading=f(!1);this.showPassword=f(!1);this.showConfirmPassword=f(!1);this.securityQuestions=f([]);this.questionsLoading=f(!1);this.questionsError=f("");this.fieldLabels={email:"Email address",password:"Password",confirmPassword:"Confirm password",securityQuestionId:"Security question",securityAnswer:"Security answer"};this.registerForm=this.fb.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(8),p.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/)]],confirmPassword:["",[p.required]],securityQuestionId:["",[p.required]],securityAnswer:["",[p.required,p.maxLength(255)]]},{validators:this.passwordMatchValidator})}ngOnInit(){return S(this,null,function*(){yield this.loadSecurityQuestions()})}get email(){return this.registerForm.get("email")}get password(){return this.registerForm.get("password")}get confirmPassword(){return this.registerForm.get("confirmPassword")}get securityQuestionId(){return this.registerForm.get("securityQuestionId")}get securityAnswer(){return this.registerForm.get("securityAnswer")}passwordMatchValidator(i){let o=i.get("password"),e=i.get("confirmPassword");return o&&e&&o.value!==e.value?(e.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):null}togglePasswordVisibility(){this.showPassword.update(i=>!i)}toggleConfirmPasswordVisibility(){this.showConfirmPassword.update(i=>!i)}loadSecurityQuestions(){return S(this,null,function*(){this.questionsLoading.set(!0),this.questionsError.set("");try{let i=yield this.auth.getSecurityQuestions();i?.length||this.questionsError.set("Security questions are unavailable right now. Please try again later."),this.securityQuestions.set(i??[])}catch{this.questionsError.set("Unable to load security questions. Please try again."),this.toast.show("Failed to load security questions. Please try again.","error")}finally{this.questionsLoading.set(!1)}})}retrySecurityQuestions(){return S(this,null,function*(){yield this.loadSecurityQuestions()})}getFieldLabel(i){return this.fieldLabels[i]||i}getFieldError(i){let o=this.registerForm.get(i);if(o?.errors&&o.touched){let e=this.getFieldLabel(i);if(o.errors.required)return`${e} is required`;if(o.errors.email)return"Please enter a valid email";if(o.errors.minlength)return`${e} must be at least ${o.errors.minlength.requiredLength} characters`;if(o.errors.pattern)return`${e} must contain at least one uppercase letter, one lowercase letter, one number, and one special character`;if(o.errors.passwordMismatch)return"Passwords do not match";if(o.errors.maxlength)return`${e} must be ${o.errors.maxlength.requiredLength} characters or fewer`}return""}submit(){return S(this,null,function*(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched(),this.toast.show("Please fix the errors below","error");return}try{this.isLoading.set(!0);let i=(this.securityAnswer?.value??"").trim();yield this.auth.signup({email:this.email?.value,password:this.password?.value,security_question_id:Number(this.securityQuestionId?.value),security_answer:i}),this.toast.show("Account created successfully! Please sign in.","success"),this.router.navigateByUrl("/login")}catch{this.toast.show("Registration failed. Please try again.","error")}finally{this.isLoading.set(!1)}})}goToLogin(i){i?.preventDefault(),this.router.navigateByUrl("/login")}};b.\u0275fac=function(o){return new(o||b)},b.\u0275cmp=k({type:b,selectors:[["app-register"]],decls:104,vars:42,consts:[[1,"mx-auto","max-w-md","px-4","py-8"],[1,"absolute","inset-0","overflow-hidden","pointer-events-none"],[1,"absolute","top-1/4","left-1/4","w-96","h-96","bg-accent-500/8","rounded-full","blur-3xl","animate-float"],[1,"absolute","bottom-1/4","right-1/4","w-80","h-80","bg-purple-500/8","rounded-full","blur-3xl","animate-float",2,"animation-delay","1.5s"],[1,"absolute","top-1/2","left-1/3","w-72","h-72","bg-emerald-500/6","rounded-full","blur-3xl","animate-float",2,"animation-delay","3s"],[1,"relative","z-10"],[1,"text-center","mb-10"],[1,"inline-flex","items-center","justify-center","w-16","h-16","rounded-full","bg-gradient-to-br","from-purple-500/20","to-emerald-500/20","mb-6","animate-pulse-glow"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-purple-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"],[1,"text-4xl","font-bold","text-gradient","mb-3","tracking-tight"],[1,"text-neutral-400","text-lg"],[1,"card-premium","p-10","animate-scale-in"],[1,"space-y-7",3,"ngSubmit","formGroup"],[1,"block","text-sm","font-medium","text-neutral-300","mb-2"],[1,"relative"],["type","email","formControlName","email","placeholder","Enter your email",1,"input","w-full","pr-10"],[1,"absolute","right-3","top-1/2","transform","-translate-y-1/2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-neutral-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"],["class","mt-1 text-sm text-red-400 flex items-center gap-1",4,"ngIf"],["formControlName","password","placeholder","Create a password",1,"input","w-full","pr-12",3,"type"],["type","button",1,"absolute","right-3","top-1/2","transform","-translate-y-1/2","text-neutral-400","hover:text-accent-300","transition-colors",3,"click"],["class","w-5 h-5","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["formControlName","confirmPassword","placeholder","Confirm your password",1,"input","w-full","pr-12",3,"type"],["formControlName","securityQuestionId",1,"input","w-full","appearance-none","pr-12","text-neutral-200","bg-ink-800/60","border","border-white/10","rounded-xl","focus:border-accent-400","focus:ring-2","focus:ring-accent-500/40","transition-all",2,"color-scheme","dark","background-color","rgba(15, 20, 26, 0.65)","backdrop-filter","blur(12px)",3,"disabled"],["value","","disabled","","selected","",1,"bg-ink-900","text-neutral-400"],["class","bg-ink-900 text-neutral-200 hover:bg-ink-700 cursor-pointer","style","padding: 12px; font-size: 0.95rem;",3,"value",4,"ngFor","ngForOf"],[1,"absolute","right-3","top-1/2","-translate-y-1/2","flex","items-center","gap-2","text-neutral-400","pointer-events-none"],["class","w-4 h-4 border-2 border-accent-300 border-t-transparent rounded-full animate-spin",4,"ngIf"],["class","mt-2 flex items-center justify-between text-sm text-amber-300 bg-amber-500/10 border border-amber-500/30 rounded-lg px-3 py-2",4,"ngIf"],["class","mt-2 text-sm text-neutral-400",4,"ngIf"],["type","text","formControlName","securityAnswer","placeholder","Enter your answer",1,"input","w-full","pr-10"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6l3 3"],["type","submit",1,"btn","btn-primary","w-full","py-4","text-lg","font-semibold","shadow-2xl","hover:shadow-glow-purple","transform","hover:-translate-y-0.5","disabled:transform-none",3,"disabled"],["class","w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2",4,"ngIf"],["class","w-5 h-5 mr-2","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"mt-8","pt-7","border-t","border-white/10"],[1,"text-center","space-y-3"],[1,"text-sm","text-neutral-400"],["type","button",1,"w-full","flex","items-center","justify-center","gap-2","rounded-2xl","border","border-white/15","bg-gradient-to-r","from-ink-700/70","to-ink-800/70","hover:from-accent-500/20","hover:to-purple-500/20","text-accent-200","hover:text-white","font-semibold","px-5","py-3","transition-all","group",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","transform","transition-transform","group-hover:-translate-x-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 17l-5-5m0 0l5-5m-5 5h12"],[1,"mt-10","grid","grid-cols-3","gap-4"],[1,"text-center","p-5","rounded-xl","bg-gradient-to-br","from-accent-500/10","via-accent-500/5","to-transparent","border","border-accent-500/20","hover:border-accent-500/40","transition-all","duration-300","hover:scale-105","hover:shadow-glow","group"],[1,"w-10","h-10","mx-auto","mb-3","rounded-full","bg-accent-500/20","flex","items-center","justify-center","group-hover:scale-110","transition-transform"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-accent-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 10V3L4 14h7v7l9-11h-7z"],[1,"text-sm","font-semibold","text-neutral-200","mb-1.5"],[1,"text-xs","text-neutral-400","leading-relaxed"],[1,"text-center","p-5","rounded-xl","bg-gradient-to-br","from-purple-500/10","via-purple-500/5","to-transparent","border","border-purple-500/20","hover:border-purple-500/40","transition-all","duration-300","hover:scale-105","hover:shadow-glow-purple","group"],[1,"w-10","h-10","mx-auto","mb-3","rounded-full","bg-purple-500/20","flex","items-center","justify-center","group-hover:scale-110","transition-transform"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-purple-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"],[1,"text-center","p-5","rounded-xl","bg-gradient-to-br","from-emerald-500/10","via-emerald-500/5","to-transparent","border","border-emerald-500/20","hover:border-emerald-500/40","transition-all","duration-300","hover:scale-105","group"],[1,"w-10","h-10","mx-auto","mb-3","rounded-full","bg-emerald-500/20","flex","items-center","justify-center","group-hover:scale-110","transition-transform"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-emerald-400"],[1,"mt-1","text-sm","text-red-400","flex","items-center","gap-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"],[1,"bg-ink-900","text-neutral-200","hover:bg-ink-700","cursor-pointer",2,"padding","12px","font-size","0.95rem",3,"value"],[1,"w-4","h-4","border-2","border-accent-300","border-t-transparent","rounded-full","animate-spin"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"mt-2","flex","items-center","justify-between","text-sm","text-amber-300","bg-amber-500/10","border","border-amber-500/30","rounded-lg","px-3","py-2"],["type","button",1,"text-accent-300","hover:text-accent-100","font-semibold",3,"click"],[1,"mt-2","text-sm","text-neutral-400"],[1,"w-5","h-5","border-2","border-white","border-t-transparent","rounded-full","animate-spin","mr-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"]],template:function(o,e){o&1&&(t(0,"div",0)(1,"div",1),l(2,"div",2)(3,"div",3)(4,"div",4),r(),t(5,"div",5)(6,"div",6)(7,"div",7),m(),t(8,"svg",8),l(9,"path",9),r()(),c(),t(10,"h1",10),a(11,"Create Account"),r(),t(12,"p",11),a(13,"Join thousands using our AI platform"),r()(),t(14,"div",12)(15,"form",13),h("ngSubmit",function(){return e.submit()}),t(16,"div")(17,"label",14),a(18," Email Address "),r(),t(19,"div",15),l(20,"input",16),t(21,"div",17),m(),t(22,"svg",18),l(23,"path",19),r()()(),u(24,Z,4,1,"div",20),r(),c(),t(25,"div")(26,"label",14),a(27," Password "),r(),t(28,"div",15),l(29,"input",21),t(30,"button",22),h("click",function(){return e.togglePasswordVisibility()}),u(31,J,3,0,"svg",23)(32,K,2,0,"svg",23),r()(),u(33,W,4,1,"div",20),r(),t(34,"div")(35,"label",14),a(36," Confirm Password "),r(),t(37,"div",15),l(38,"input",24),t(39,"button",22),h("click",function(){return e.toggleConfirmPasswordVisibility()}),u(40,X,3,0,"svg",23)(41,Y,2,0,"svg",23),r()(),u(42,ee,4,1,"div",20),r(),t(43,"div")(44,"label",14),a(45," Security Question "),r(),t(46,"div",15)(47,"select",25)(48,"option",26),a(49," Select a security question "),r(),u(50,te,2,2,"option",27),r(),t(51,"div",28),u(52,re,1,0,"div",29)(53,ie,2,0,"svg",23),r()(),u(54,ne,5,1,"div",30)(55,oe,2,0,"div",31)(56,se,4,1,"div",20),r(),t(57,"div")(58,"label",14),a(59," Security Answer "),r(),t(60,"div",15),l(61,"input",32),t(62,"div",17),m(),t(63,"svg",18),l(64,"path",33),r()()(),u(65,ae,4,1,"div",20),r(),c(),t(66,"button",34),u(67,le,1,0,"div",35)(68,de,2,0,"svg",36),a(69),r()(),t(70,"div",37)(71,"div",38)(72,"p",39),a(73,"Already have an account?"),r(),t(74,"button",40),h("click",function(U){return e.goToLogin(U)}),t(75,"span"),a(76,"Sign in instead"),r(),m(),t(77,"svg",41),l(78,"path",42),r()()()()(),c(),t(79,"div",43)(80,"div",44)(81,"div",45),m(),t(82,"svg",46),l(83,"path",47),r()(),c(),t(84,"h3",48),a(85,"AI-Powered"),r(),t(86,"p",49),a(87,"Advanced assistants"),r()(),t(88,"div",50)(89,"div",51),m(),t(90,"svg",52),l(91,"path",53),r()(),c(),t(92,"h3",48),a(93,"Secure"),r(),t(94,"p",49),a(95,"Enterprise-grade protection"),r()(),t(96,"div",54)(97,"div",55),m(),t(98,"svg",56),l(99,"path",47),r()(),c(),t(100,"h3",48),a(101,"Intuitive"),r(),t(102,"p",49),a(103,"Beautiful modern UI"),r()()()()()),o&2&&(s(15),d("formGroup",e.registerForm),s(5),w("border-red-500",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched))("border-accent-500",(e.email==null?null:e.email.valid)&&(e.email==null?null:e.email.touched)),s(4),d("ngIf",e.getFieldError("email")),s(5),w("border-red-500",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched))("border-accent-500",(e.password==null?null:e.password.valid)&&(e.password==null?null:e.password.touched)),d("type",e.showPassword()?"text":"password"),s(2),d("ngIf",!e.showPassword()),s(),d("ngIf",e.showPassword()),s(),d("ngIf",e.getFieldError("password")),s(5),w("border-red-500",(e.confirmPassword==null?null:e.confirmPassword.invalid)&&(e.confirmPassword==null?null:e.confirmPassword.touched))("border-accent-500",(e.confirmPassword==null?null:e.confirmPassword.valid)&&(e.confirmPassword==null?null:e.confirmPassword.touched)),d("type",e.showConfirmPassword()?"text":"password"),s(2),d("ngIf",!e.showConfirmPassword()),s(),d("ngIf",e.showConfirmPassword()),s(),d("ngIf",e.getFieldError("confirmPassword")),s(5),w("border-red-500",(e.securityQuestionId==null?null:e.securityQuestionId.invalid)&&(e.securityQuestionId==null?null:e.securityQuestionId.touched))("border-accent-500",(e.securityQuestionId==null?null:e.securityQuestionId.valid)&&(e.securityQuestionId==null?null:e.securityQuestionId.touched)),d("disabled",e.questionsLoading()||!e.securityQuestions().length),s(3),d("ngForOf",e.securityQuestions()),s(2),d("ngIf",e.questionsLoading()),s(),d("ngIf",!e.questionsLoading()),s(),d("ngIf",e.questionsError()),s(),d("ngIf",!e.questionsError()&&!e.securityQuestions().length&&!e.questionsLoading()),s(),d("ngIf",e.getFieldError("securityQuestionId")),s(5),w("border-red-500",(e.securityAnswer==null?null:e.securityAnswer.invalid)&&(e.securityAnswer==null?null:e.securityAnswer.touched))("border-accent-500",(e.securityAnswer==null?null:e.securityAnswer.valid)&&(e.securityAnswer==null?null:e.securityAnswer.touched)),s(4),d("ngIf",e.getFieldError("securityAnswer")),s(),d("disabled",e.isLoading()||e.registerForm.invalid),s(),d("ngIf",e.isLoading()),s(),d("ngIf",!e.isLoading()),s(),v(" ",e.isLoading()?"Creating Account...":"Create My Account"," "))},dependencies:[H,R,B,z,V,j,T,Q,$,G,N,M,P,L],encapsulation:2});var O=b;export{O as RegisterComponent};
