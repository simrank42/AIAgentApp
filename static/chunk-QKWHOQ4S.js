import{a as B,c as A,e as I,k as W}from"./chunk-IJ3PXO2C.js";import{$ as m,$a as j,B as s,Ia as N,J as d,Ma as U,O as k,Ra as T,Va as L,Y as g,Z as e,Za as D,_ as t,d as l,da as S,ka as r,la as M,ma as _,oa as f,pa as v,q as E,qa as w,sa as b,u as h,x as u,y as c}from"./chunk-OOSXHJOY.js";var x=class x{constructor(){this.http=h(U);this.baseUrl=`${L.apiUrl}/users`}getProfile(){return l(this,null,function*(){return this.http.get(`${this.baseUrl}/me`).toPromise()})}updateProfile(o){return l(this,null,function*(){return this.http.put(`${this.baseUrl}/me`,o).toPromise()})}changePassword(o,a){return l(this,null,function*(){return this.http.put(`${this.baseUrl}/me/password`,{currentPassword:o,newPassword:a}).toPromise()})}getStats(){return l(this,null,function*(){return this.http.get(`${this.baseUrl}/me/stats`).toPromise()})}exportData(){return l(this,null,function*(){return this.http.post(`${this.baseUrl}/me/export`,{}).toPromise()})}deleteAccount(){return l(this,null,function*(){return this.http.delete(`${this.baseUrl}/me`).toPromise()})}};x.\u0275fac=function(a){return new(a||x)},x.\u0275prov=E({token:x,factory:x.\u0275fac,providedIn:"root"});var C=x;var y=()=>({updateOn:"change"}),P=class P{constructor(){this.auth=h(j);this.router=h(T);this.toast=h(D);this.userService=h(C);this.firstName=s("");this.lastName=s("");this.bio=s("");this.currentPassword=s("");this.newPassword=s("");this.confirmPassword=s("");this.totalConversations=s(0);this.totalMessages=s(0);this.memberSince=s("");this.profile=s(null);this.isLoading=s(!1);this.loadError=s(null)}getUserEmail(){return this.auth.currentUser()||""}getUserInitial(){let o=this.getUserEmail();return o?o.charAt(0).toUpperCase():"?"}updateProfile(){return l(this,null,function*(){try{let o={firstName:this.firstName(),lastName:this.lastName(),bio:this.bio()},a=yield this.userService.updateProfile(o);this.profile.set(a),this.toast.show("Profile updated successfully","success")}catch{this.toast.show("Failed to update profile","error")}})}updatePassword(){return l(this,null,function*(){if(this.newPassword()!==this.confirmPassword()){this.toast.show("Passwords do not match","error");return}if(this.newPassword().length<6){this.toast.show("Password must be at least 6 characters","error");return}try{yield this.userService.changePassword(this.currentPassword(),this.newPassword()),this.toast.show("Password updated successfully","success"),this.currentPassword.set(""),this.newPassword.set(""),this.confirmPassword.set("")}catch{this.toast.show("Failed to update password","error")}})}deleteAccount(){return l(this,null,function*(){if(confirm("Are you absolutely sure you want to delete your account? This action cannot be undone and will permanently delete all your data."))try{yield this.userService.deleteAccount(),this.toast.show("Account deleted successfully","success"),this.router.navigateByUrl("/login")}catch{this.toast.show("Failed to delete account","error")}})}changeAvatar(){this.toast.show("Avatar upload coming soon","info")}goBackToChat(){this.router.navigateByUrl("/chat")}loadProfileData(){return l(this,null,function*(){this.isLoading.set(!0),this.loadError.set(null);try{let[o,a]=yield Promise.all([this.userService.getProfile(),this.userService.getStats()]);this.profile.set(o),this.firstName.set(o.firstName||""),this.lastName.set(o.lastName||""),this.bio.set(o.bio||""),this.totalConversations.set(a.totalConversations),this.totalMessages.set(a.totalMessages),this.memberSince.set(a.memberSince)}catch(o){console.error("Failed to load profile data:",o),this.loadError.set("Failed to load profile data. Please try again later."),this.toast.show("Failed to load profile data","error"),this.firstName.set(""),this.lastName.set(""),this.bio.set(""),this.totalConversations.set(0),this.totalMessages.set(0),this.memberSince.set("")}finally{this.isLoading.set(!1)}})}ngOnInit(){this.loadProfileData()}};P.\u0275fac=function(a){return new(a||P)},P.\u0275cmp=k({type:P,selectors:[["app-profile"]],decls:135,vars:23,consts:[[1,"max-w-5xl","mx-auto","px-4","sm:px-6","lg:px-8","py-10"],[1,"mb-12"],[1,"flex","items-center","justify-between","mb-6"],[1,"group","flex","items-center","gap-2","px-5","py-3","rounded-xl","bg-gradient-to-br","from-ink-700/60","to-ink-600/50","border","border-white/10","text-neutral-300","hover:text-neutral-100","hover:border-accent-500/30","hover:shadow-glow","transition-all","transform","hover:scale-105",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","transform","group-hover:-translate-x-1","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"font-medium"],[1,"text-5xl","font-bold","text-gradient","mb-4","tracking-tight"],[1,"text-lg","text-neutral-300","leading-relaxed"],[1,"space-y-10"],[1,"card-premium","p-10","hover:shadow-glow","transition-all","duration-300"],[1,"flex","items-center","gap-4","mb-8"],[1,"w-14","h-14","rounded-2xl","bg-gradient-to-br","from-accent-500/20","to-purple-500/20","flex","items-center","justify-center","shadow-glow"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-7","h-7","text-accent-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-2xl","font-bold","text-neutral-100","mb-1"],[1,"text-sm","text-neutral-400"],[1,"flex","items-start","gap-8"],[1,"flex-shrink-0"],[1,"relative","group"],[1,"w-32","h-32","rounded-2xl","bg-gradient-to-br","from-accent-500","to-purple-500","flex","items-center","justify-center","text-white","text-4xl","font-bold","shadow-2xl","ring-4","ring-accent-500/20","group-hover:ring-accent-500/40","transition-all"],[1,"absolute","inset-0","rounded-2xl","bg-gradient-to-br","from-accent-500/0","to-purple-500/0","group-hover:from-accent-500/10","group-hover:to-purple-500/10","transition-all","pointer-events-none"],[1,"flex-1","space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"block","text-sm","font-semibold","text-neutral-200","mb-3"],["type","text","placeholder","Enter your first name",1,"input","w-full","py-3",3,"ngModelChange","ngModel","ngModelOptions"],["type","text","placeholder","Enter your last name",1,"input","w-full","py-3",3,"ngModelChange","ngModel","ngModelOptions"],[1,"relative"],["type","email","readonly","",1,"input","w-full","py-3","pr-10","bg-ink-700/30",3,"value"],[1,"absolute","right-3","top-1/2","transform","-translate-y-1/2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-neutral-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"],["placeholder","Tell us about yourself...",1,"input","w-full","h-24","resize-none","py-3","leading-relaxed",3,"ngModelChange","ngModel","ngModelOptions"],[1,"flex","justify-end","pt-4"],[1,"btn","btn-primary","px-8","py-3","shadow-xl","hover:shadow-glow-purple","transform","hover:-translate-y-0.5","transition-all",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"font-semibold"],[1,"w-14","h-14","rounded-2xl","bg-gradient-to-br","from-emerald-500/20","to-gold-500/20","flex","items-center","justify-center","shadow-glow"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-7","h-7","text-emerald-400"],[1,"space-y-8"],[1,"space-y-6"],[1,"text-base","font-bold","text-neutral-200","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],["type","password","placeholder","Current password",1,"input","w-full","py-3",3,"ngModelChange","ngModel","ngModelOptions"],["type","password","placeholder","New password",1,"input","w-full","py-3",3,"ngModelChange","ngModel","ngModelOptions"],["type","password","placeholder","Confirm password",1,"input","w-full","py-3",3,"ngModelChange","ngModel","ngModelOptions"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"],[1,"w-14","h-14","rounded-2xl","bg-gradient-to-br","from-purple-500/20","to-emerald-500/20","flex","items-center","justify-center","shadow-glow-purple"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-7","h-7","text-purple-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"text-center","p-6","rounded-2xl","bg-gradient-to-br","from-accent-500/10","to-purple-500/10","border","border-accent-500/20","hover:border-accent-500/40","hover:shadow-glow","transition-all","duration-300","hover:scale-105","group"],[1,"text-4xl","font-bold","text-gradient","mb-2","group-hover:scale-110","transition-transform"],[1,"text-sm","font-medium","text-neutral-300"],[1,"text-center","p-6","rounded-2xl","bg-gradient-to-br","from-purple-500/10","to-emerald-500/10","border","border-purple-500/20","hover:border-purple-500/40","hover:shadow-glow-purple","transition-all","duration-300","hover:scale-105","group"],[1,"text-center","p-6","rounded-2xl","bg-gradient-to-br","from-emerald-500/10","to-gold-500/10","border","border-emerald-500/20","hover:border-emerald-500/40","transition-all","duration-300","hover:scale-105","group"],[1,"card-premium","p-10","border-2","border-red-500/30","bg-gradient-to-br","from-red-500/5","to-transparent","hover:border-red-500/50","transition-all","duration-300"],[1,"w-14","h-14","rounded-2xl","bg-gradient-to-br","from-red-500/20","to-orange-500/20","flex","items-center","justify-center","shadow-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-7","h-7","text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","justify-between","p-6","rounded-2xl","bg-red-500/10","border-2","border-red-500/30","hover:border-red-500/50","transition-all","gap-4"],[1,"flex-1"],[1,"text-base","font-bold","text-red-300","mb-2"],[1,"text-sm","text-red-400/80","leading-relaxed"],[1,"px-6","py-3","rounded-xl","bg-red-500/20","border-2","border-red-500/40","text-red-400","font-bold","hover:bg-red-500/30","hover:border-red-500/60","hover:shadow-lg","transition-all","transform","hover:scale-105",3,"click"]],template:function(a,n){a&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),S("click",function(){return n.goBackToChat()}),u(),e(4,"svg",4),m(5,"path",5),t(),c(),e(6,"span",6),r(7,"Back to Chat"),t()()(),e(8,"h1",7),r(9,"Profile Settings"),t(),e(10,"p",8),r(11,"Manage your account information and preferences"),t()(),e(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12),u(),e(16,"svg",13),m(17,"path",14),t()(),c(),e(18,"div")(19,"h2",15),r(20,"Profile Information"),t(),e(21,"p",16),r(22,"Update your personal details"),t()()(),e(23,"div",17)(24,"div",18)(25,"div",19)(26,"div",20),r(27),t(),m(28,"div",21),t()(),e(29,"div",22)(30,"div",23)(31,"div")(32,"label",24),r(33,"First Name"),t(),e(34,"input",25),w("ngModelChange",function(i){return v(n.firstName,i)||(n.firstName=i),i}),t()(),e(35,"div")(36,"label",24),r(37,"Last Name"),t(),e(38,"input",26),w("ngModelChange",function(i){return v(n.lastName,i)||(n.lastName=i),i}),t()()(),e(39,"div")(40,"label",24),r(41,"Email Address"),t(),e(42,"div",27),m(43,"input",28),e(44,"div",29),u(),e(45,"svg",30),m(46,"path",31),t()()()(),c(),e(47,"div")(48,"label",24),r(49,"Bio"),t(),e(50,"textarea",32),w("ngModelChange",function(i){return v(n.bio,i)||(n.bio=i),i}),t()(),e(51,"div",33)(52,"button",34),S("click",function(){return n.updateProfile()}),u(),e(53,"svg",35),m(54,"path",36),t(),c(),e(55,"span",37),r(56,"Save Changes"),t()()()()()(),e(57,"div",10)(58,"div",11)(59,"div",38),u(),e(60,"svg",39),m(61,"path",31),t()(),c(),e(62,"div")(63,"h2",15),r(64,"Account Security"),t(),e(65,"p",16),r(66,"Manage your password and security settings"),t()()(),e(67,"div",40)(68,"div",41)(69,"h3",42),r(70,"Change Password"),t(),e(71,"div",43)(72,"div")(73,"label",24),r(74,"Current Password"),t(),e(75,"input",44),w("ngModelChange",function(i){return v(n.currentPassword,i)||(n.currentPassword=i),i}),t()(),e(76,"div")(77,"label",24),r(78,"New Password"),t(),e(79,"input",45),w("ngModelChange",function(i){return v(n.newPassword,i)||(n.newPassword=i),i}),t()(),e(80,"div")(81,"label",24),r(82,"Confirm Password"),t(),e(83,"input",46),w("ngModelChange",function(i){return v(n.confirmPassword,i)||(n.confirmPassword=i),i}),t()()(),e(84,"div",33)(85,"button",34),S("click",function(){return n.updatePassword()}),u(),e(86,"svg",35),m(87,"path",47),t(),c(),e(88,"span",37),r(89,"Update Password"),t()()()()()(),e(90,"div",10)(91,"div",11)(92,"div",48),u(),e(93,"svg",49),m(94,"path",50),t()(),c(),e(95,"div")(96,"h2",15),r(97,"Account Statistics"),t(),e(98,"p",16),r(99,"Your usage and activity overview"),t()()(),e(100,"div",43)(101,"div",51)(102,"div",52),r(103),t(),e(104,"div",53),r(105,"Total Conversations"),t()(),e(106,"div",54)(107,"div",52),r(108),t(),e(109,"div",53),r(110,"Messages Sent"),t()(),e(111,"div",55)(112,"div",52),r(113),t(),e(114,"div",53),r(115,"Member Since"),t()()()(),e(116,"div",56)(117,"div",11)(118,"div",57),u(),e(119,"svg",58),m(120,"path",59),t()(),c(),e(121,"div")(122,"h2",15),r(123,"Danger Zone"),t(),e(124,"p",16),r(125,"Irreversible and destructive actions"),t()()(),e(126,"div",41)(127,"div",60)(128,"div",61)(129,"h3",62),r(130,"Delete Account"),t(),e(131,"p",63),r(132,"Permanently delete your account and all associated data. This action cannot be undone."),t()(),e(133,"button",64),S("click",function(){return n.deleteAccount()}),r(134," Delete Account "),t()()()()()()),a&2&&(d(27),_(" ",n.getUserInitial()," "),d(7),f("ngModel",n.firstName),g("ngModelOptions",b(17,y)),d(4),f("ngModel",n.lastName),g("ngModelOptions",b(18,y)),d(5),g("value",n.getUserEmail()),d(7),f("ngModel",n.bio),g("ngModelOptions",b(19,y)),d(25),f("ngModel",n.currentPassword),g("ngModelOptions",b(20,y)),d(4),f("ngModel",n.newPassword),g("ngModelOptions",b(21,y)),d(4),f("ngModel",n.confirmPassword),g("ngModelOptions",b(22,y)),d(20),M(n.totalConversations()),d(5),M(n.totalMessages()),d(5),M(n.memberSince()))},dependencies:[N,W,B,A,I],encapsulation:2});var F=P;export{F as ProfileComponent};
